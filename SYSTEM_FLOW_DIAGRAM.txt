┌─────────────────────────────────────────────────────────────────────────────────┐
│                              NEXHELM SYSTEM FLOW                              │
│                    Real-time Financial Advisor Opportunity Detection            │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐    WebSocket     ┌─────────────────┐    Redis     ┌─────────────────┐
│   REACT FRONTEND │ ◄──────────────► │  FASTAPI BACKEND │ ◄──────────► │   REDIS SERVER  │
│   (Port 3000)   │                  │   (Port 8002)   │              │   (Port 6379)   │
└─────────────────┘                  └─────────────────┘              └─────────────────┘
         │                                    │                                │
         │                                    │                                │
         ▼                                    ▼                                ▼
┌─────────────────┐                  ┌─────────────────┐              ┌─────────────────┐
│  User Interface │                  │  Opportunity    │              │  Data Storage   │
│  - Meeting UI   │                  │  Detection      │              │  - Conversations│
│  - Demo Controls│                  │  - LLM Analysis │              │  - Opportunities│
│  - Real-time    │                  │  - Pattern Match│              │  - Meeting Data │
│    Updates      │                  │  - Scoring      │              │  - TTL: 1 hour  │
└─────────────────┘                  └─────────────────┘              └─────────────────┘
         │                                    │
         │                                    │
         ▼                                    ▼
┌─────────────────┐                  ┌─────────────────┐
│  Demo System    │                  │  OpenAI API     │
│  - Scenarios    │                  │  - GPT-3.5-turbo│
│  - Auto Messages│                  │  - Opportunity  │
│  - Timing       │                  │    Detection    │
└─────────────────┘                  └─────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              DEMO EXECUTION FLOW                              │
└─────────────────────────────────────────────────────────────────────────────────┘

1. USER INITIATION
   ┌─────────────┐
   │ User opens  │
   │ Frontend    │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Create      │
   │ Meeting     │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ WebSocket   │
   │ Connection  │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Demo Mode   │
   │ Selection   │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Start Demo  │
   └──────┬──────┘
          │
          ▼
   ┌─────────────────────────────────────────────────────────────────────────────┐
   │                           DEMO EXECUTION LOOP                              │
   └─────────────────────────────────────────────────────────────────────────────┘
   
   ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
   │ Send Demo   │───►│ Store in    │───►│ AI Analysis │───►│ Detect      │
   │ Message     │    │ Redis       │    │ (LLM)       │    │ Opportunities│
   └──────┬──────┘    └──────┬──────┘    └──────┬──────┘    └──────┬──────┘
          │                  │                  │                  │
          │                  ▼                  │                  ▼
          │         ┌─────────────┐             │         ┌─────────────┐
          │         │ Conversation│             │         │ Score &     │
          │         │ History     │             │         │ Rank        │
          │         └─────────────┘             │         └──────┬──────┘
          │                                    │                  │
          │                                    ▼                  ▼
          │                           ┌─────────────┐    ┌─────────────┐
          │                           │ Context     │    │ Store in    │
          │                           │ Building    │    │ Redis       │
          │                           └─────────────┘    └──────┬──────┘
          │                                                    │
          │                                                    ▼
          │                                           ┌─────────────┐
          │                                           │ Broadcast   │
          │                                           │ to Frontend │
          │                                           └──────┬──────┘
          │                                                  │
          │                                                  ▼
          │                                           ┌─────────────┐
          │                                           │ Real-time   │
          │                                           │ UI Updates  │
          │                                           └─────────────┘
          │
          ▼
   ┌─────────────┐
   │ Wait Delay  │
   │ (2-5 sec)   │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Next        │
   │ Message?    │
   └──────┬──────┘
          │
          ├─ YES ──► Back to Send Demo Message
          │
          └─ NO ──► Demo Complete

┌─────────────────────────────────────────────────────────────────────────────────┐
│                           DEMO SCENARIOS AVAILABLE                            │
└─────────────────────────────────────────────────────────────────────────────────┘

1. RETIREMENT PLANNING (90 seconds)
   ┌─────────────┐
   │ Client: 60  │
   │ Concerned   │
   │ about 401k  │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Opportunities│
   │ - IRA Rollover│
   │ - Catch-up   │
   │ - Planning   │
   └─────────────┘

2. EDUCATION PLANNING (75 seconds)
   ┌─────────────┐
   │ Daughter    │
   │ at Northwestern│
   │ $60k/year   │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Opportunities│
   │ - 529 Plans │
   │ - Tax Benefits│
   │ - Funding   │
   └─────────────┘

3. LIFE CHANGES (80 seconds)
   ┌─────────────┐
   │ New Baby +  │
   │ Promotion   │
   │ at Work     │
   └──────┬──────┘
          │
          ▼
   ┌─────────────┐
   │ Opportunities│
   │ - Life Ins. │
   │ - Estate    │
   │ - Protection│
   └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                           REDIS DATA STRUCTURE                                │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐
│ meeting:{id}    │
│ - client_id     │
│ - status        │
│ - start_time    │
│ - TTL: 3600s    │
└─────────────────┘

┌─────────────────┐
│ Conversation:{id}│
│ - List of       │
│   messages      │
│ - TTL: 3600s    │
└─────────────────┘

┌─────────────────┐
│ opportunities:{id}│
│ - Sorted Set    │
│ - Score-based   │
│ - TTL: 3600s    │
└─────────────────┘

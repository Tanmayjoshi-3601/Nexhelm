# Nexhelm Agentic Workflow - Data Flow Diagram

## ðŸ“Š Complete Data Flow Architecture

### 1. Input Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        INPUT DATA FLOW                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   CLIENT    â”‚    â”‚   REQUEST   â”‚    â”‚   CONTEXT   â”‚         â”‚
â”‚  â”‚   REQUEST   â”‚    â”‚   PARSER    â”‚    â”‚   LOADER    â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ "Open IRA â”‚â”€â”€â”€â–ºâ”‚ â€¢ Extract   â”‚â”€â”€â”€â–ºâ”‚ â€¢ Load      â”‚         â”‚
â”‚  â”‚   for John" â”‚    â”‚   intent    â”‚    â”‚   client    â”‚         â”‚
â”‚  â”‚ â€¢ Client ID â”‚    â”‚ â€¢ Parse     â”‚    â”‚   data      â”‚         â”‚
â”‚  â”‚ â€¢ Context   â”‚    â”‚   params    â”‚    â”‚ â€¢ Get       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   history   â”‚         â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Workflow State Data Structure

```json
{
  "request": {
    "type": "open_roth_ira",
    "client_id": "john_smith_123",
    "client_name": "John Smith",
    "initiator": "sarah_advisor"
  },
  "workflow_id": "uuid-generated-id",
  "status": "in_progress",
  "created_at": "2025-10-06T22:07:26.318279",
  "updated_at": "2025-10-06T22:07:26.318279",
  "context": {
    "client_age": 45,
    "existing_accounts": ["checking", "brokerage"],
    "available_documents": ["drivers_license", "tax_return_2023"],
    "client_income": 145000
  },
  "tasks": [
    {
      "id": "task_1",
      "description": "Verify client's eligibility for Roth IRA",
      "owner": "operations_agent",
      "status": "completed",
      "dependencies": [],
      "result": "Account ROTH IRA-1000 created successfully",
      "priority": "high",
      "estimated_duration": "1 hour"
    }
  ],
  "messages": [
    {
      "from_agent": "orchestrator_agent",
      "to_agent": "workflow_system",
      "timestamp": "2025-10-06T22:07:26.318279",
      "content": "Created comprehensive workflow plan",
      "type": "workflow_planning"
    }
  ],
  "decisions": [
    {
      "agent": "orchestrator_agent",
      "timestamp": "2025-10-06T22:07:26.318282",
      "decision": "Created comprehensive workflow plan",
      "reasoning": "The client has requested to open a Roth IRA..."
    }
  ],
  "blockers": [],
  "next_actions": [
    {
      "agent": "operations_agent",
      "action": "Verify client's eligibility for Roth IRA",
      "priority": "high"
    }
  ],
  "outcome": {
    "account_number": "ROTH IRA-1000",
    "account_type": "roth_ira",
    "status": "active",
    "created_at": "2024-01-15T10:30:00Z"
  }
}
```

### 3. Agent Communication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AGENT COMMUNICATION FLOW                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ORCHESTRATOR â”‚    â”‚   ADVISOR   â”‚    â”‚ OPERATIONS  â”‚         â”‚
â”‚  â”‚   AGENT     â”‚    â”‚   AGENT     â”‚    â”‚   AGENT     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â”‚ 1. Workflow Plan â”‚                  â”‚                â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â”‚ 2. Task Assignmentâ”‚                 â”‚                â”‚
â”‚         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                  â”‚                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â”‚                  â”‚ 3. Client Comm   â”‚                â”‚
â”‚         â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â”‚                  â”‚ 4. Status Update â”‚                â”‚
â”‚         â”‚                  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â”‚         â”‚ 5. Final Result  â”‚                  â”‚                â”‚
â”‚         â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚                â”‚
â”‚         â”‚                  â”‚                  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. LLM Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        LLM DATA FLOW                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   AGENT     â”‚    â”‚   PROMPT    â”‚    â”‚   LLM API   â”‚         â”‚
â”‚  â”‚   CONTEXT   â”‚    â”‚   BUILDER   â”‚    â”‚             â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Workflow  â”‚â”€â”€â”€â–ºâ”‚ â€¢ System    â”‚â”€â”€â”€â–ºâ”‚ â€¢ GPT-3.5   â”‚         â”‚
â”‚  â”‚   State     â”‚    â”‚   Prompt    â”‚    â”‚ â€¢ Caching   â”‚         â”‚
â”‚  â”‚ â€¢ Client    â”‚    â”‚ â€¢ Context   â”‚    â”‚ â€¢ Response  â”‚         â”‚
â”‚  â”‚   Info      â”‚    â”‚ â€¢ Task      â”‚    â”‚ â€¢ Error     â”‚         â”‚
â”‚  â”‚ â€¢ History   â”‚    â”‚   Details   â”‚    â”‚   Handling  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                         â”‚                      â”‚
â”‚                                         â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   RESPONSE  â”‚    â”‚   PARSER    â”‚    â”‚   CACHE     â”‚         â”‚
â”‚  â”‚   HANDLER   â”‚â—„â”€â”€â”€â”‚             â”‚â—„â”€â”€â”€â”‚             â”‚         â”‚
â”‚  â”‚             â”‚    â”‚ â€¢ JSON      â”‚    â”‚ â€¢ Store     â”‚         â”‚
â”‚  â”‚ â€¢ Validate  â”‚    â”‚   Parse     â”‚    â”‚   Response  â”‚         â”‚
â”‚  â”‚ â€¢ Extract   â”‚    â”‚ â€¢ Extract   â”‚    â”‚ â€¢ Check     â”‚         â”‚
â”‚  â”‚ â€¢ Execute   â”‚    â”‚   Actions   â”‚    â”‚   Cache     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Tool Execution Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TOOL EXECUTION FLOW                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   AGENT     â”‚    â”‚   TOOL      â”‚    â”‚   STORAGE   â”‚         â”‚
â”‚  â”‚   REQUEST   â”‚    â”‚   ROUTER    â”‚    â”‚   SYSTEM    â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Tool Name â”‚â”€â”€â”€â–ºâ”‚ â€¢ Route to  â”‚â”€â”€â”€â–ºâ”‚ â€¢ CRM       â”‚         â”‚
â”‚  â”‚ â€¢ Params    â”‚    â”‚   Handler   â”‚    â”‚ â€¢ Documents â”‚         â”‚
â”‚  â”‚ â€¢ Context   â”‚    â”‚ â€¢ Validate  â”‚    â”‚ â€¢ Accounts  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   Params    â”‚    â”‚ â€¢ Notify    â”‚         â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                             â”‚                  â”‚               â”‚
â”‚                             â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   RESULT    â”‚    â”‚   ERROR     â”‚    â”‚   SUCCESS   â”‚         â”‚
â”‚  â”‚   HANDLER   â”‚â—„â”€â”€â”€â”‚   HANDLER   â”‚    â”‚   HANDLER   â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Process   â”‚    â”‚ â€¢ Log Error â”‚    â”‚ â€¢ Update    â”‚         â”‚
â”‚  â”‚   Result    â”‚    â”‚ â€¢ Return    â”‚    â”‚   State     â”‚         â”‚
â”‚  â”‚ â€¢ Update    â”‚    â”‚   Error     â”‚    â”‚ â€¢ Continue  â”‚         â”‚
â”‚  â”‚   State     â”‚    â”‚ â€¢ Fallback  â”‚    â”‚   Workflow  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6. State Management Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     STATE MANAGEMENT FLOW                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   WORKFLOW  â”‚    â”‚   STATE     â”‚    â”‚   PERSIST   â”‚         â”‚
â”‚  â”‚   EXECUTION â”‚    â”‚   UPDATER   â”‚    â”‚   LAYER     â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Agent     â”‚â”€â”€â”€â–ºâ”‚ â€¢ Update    â”‚â”€â”€â”€â–ºâ”‚ â€¢ Redis     â”‚         â”‚
â”‚  â”‚   Actions   â”‚    â”‚   Tasks     â”‚    â”‚ â€¢ Database  â”‚         â”‚
â”‚  â”‚ â€¢ Tool      â”‚    â”‚ â€¢ Update    â”‚    â”‚ â€¢ File      â”‚         â”‚
â”‚  â”‚   Results   â”‚    â”‚   Messages  â”‚    â”‚   System    â”‚         â”‚
â”‚  â”‚ â€¢ LLM       â”‚    â”‚ â€¢ Update    â”‚    â”‚             â”‚         â”‚
â”‚  â”‚   Responses â”‚    â”‚   Status    â”‚    â”‚             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                             â”‚                  â”‚               â”‚
â”‚                             â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ROUTING   â”‚    â”‚   AUDIT     â”‚    â”‚   RECOVERY  â”‚         â”‚
â”‚  â”‚   SYSTEM    â”‚â—„â”€â”€â”€â”‚   LOGGER    â”‚    â”‚   SYSTEM    â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Check     â”‚    â”‚ â€¢ Log All   â”‚    â”‚ â€¢ Restore   â”‚         â”‚
â”‚  â”‚   Dependenciesâ”‚   â”‚   Changes   â”‚    â”‚   State     â”‚         â”‚
â”‚  â”‚ â€¢ Determine â”‚    â”‚ â€¢ Track     â”‚    â”‚ â€¢ Resume    â”‚         â”‚
â”‚  â”‚   Next      â”‚    â”‚   History   â”‚    â”‚   Workflow  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7. Error Handling Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ERROR HANDLING FLOW                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ERROR     â”‚    â”‚   ERROR     â”‚    â”‚   FALLBACK  â”‚         â”‚
â”‚  â”‚   DETECTION â”‚    â”‚   CLASSIFIERâ”‚    â”‚   SYSTEM    â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ LLM       â”‚â”€â”€â”€â–ºâ”‚ â€¢ API       â”‚â”€â”€â”€â–ºâ”‚ â€¢ Hardcoded â”‚         â”‚
â”‚  â”‚   Timeout   â”‚    â”‚   Error     â”‚    â”‚   Logic     â”‚         â”‚
â”‚  â”‚ â€¢ Tool      â”‚    â”‚ â€¢ Network   â”‚    â”‚ â€¢ Continue  â”‚         â”‚
â”‚  â”‚   Failure   â”‚    â”‚   Error     â”‚    â”‚   Workflow  â”‚         â”‚
â”‚  â”‚ â€¢ Network   â”‚    â”‚ â€¢ System    â”‚    â”‚ â€¢ Log       â”‚         â”‚
â”‚  â”‚   Issue     â”‚    â”‚   Error     â”‚    â”‚   Error     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                             â”‚                  â”‚               â”‚
â”‚                             â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   RETRY     â”‚    â”‚   ESCALATE  â”‚    â”‚   COMPLETE  â”‚         â”‚
â”‚  â”‚   MECHANISM â”‚    â”‚   TO HUMAN  â”‚    â”‚   WORKFLOW  â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Retry     â”‚    â”‚ â€¢ Notify    â”‚    â”‚ â€¢ Return    â”‚         â”‚
â”‚  â”‚   Logic     â”‚    â”‚   Admin     â”‚    â”‚   Result    â”‚         â”‚
â”‚  â”‚ â€¢ Backoff   â”‚    â”‚ â€¢ Create    â”‚    â”‚ â€¢ Update    â”‚         â”‚
â”‚  â”‚   Strategy  â”‚    â”‚   Ticket    â”‚    â”‚   Status    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8. Performance Monitoring Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PERFORMANCE MONITORING FLOW                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   METRICS   â”‚    â”‚   ANALYTICS â”‚    â”‚   DASHBOARD â”‚         â”‚
â”‚  â”‚   COLLECTOR â”‚    â”‚   ENGINE    â”‚    â”‚             â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Execution â”‚â”€â”€â”€â–ºâ”‚ â€¢ Process   â”‚â”€â”€â”€â–ºâ”‚ â€¢ Real-time â”‚         â”‚
â”‚  â”‚   Time      â”‚    â”‚   Metrics   â”‚    â”‚   View      â”‚         â”‚
â”‚  â”‚ â€¢ LLM       â”‚    â”‚ â€¢ Generate  â”‚    â”‚ â€¢ Historicalâ”‚         â”‚
â”‚  â”‚   Costs     â”‚    â”‚   Reports   â”‚    â”‚   Data      â”‚         â”‚
â”‚  â”‚ â€¢ Success   â”‚    â”‚ â€¢ Identify  â”‚    â”‚ â€¢ Alerts    â”‚         â”‚
â”‚  â”‚   Rate      â”‚    â”‚   Trends    â”‚    â”‚ â€¢ KPIs      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                             â”‚                  â”‚               â”‚
â”‚                             â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   ALERTING  â”‚    â”‚   OPTIMIZE  â”‚    â”‚   REPORTING â”‚         â”‚
â”‚  â”‚   SYSTEM    â”‚    â”‚   SYSTEM    â”‚    â”‚   SYSTEM    â”‚         â”‚
â”‚  â”‚             â”‚    â”‚             â”‚    â”‚             â”‚         â”‚
â”‚  â”‚ â€¢ Threshold â”‚    â”‚ â€¢ Auto-tune â”‚    â”‚ â€¢ Generate  â”‚         â”‚
â”‚  â”‚   Alerts    â”‚    â”‚   Params    â”‚    â”‚   Reports   â”‚         â”‚
â”‚  â”‚ â€¢ Notify    â”‚    â”‚ â€¢ Improve   â”‚    â”‚ â€¢ Export    â”‚         â”‚
â”‚  â”‚   Admins    â”‚    â”‚   Performanceâ”‚   â”‚   Data      â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ðŸ“Š Data Types and Structures

### Core Data Types

1. **WorkflowState**: Main state container
2. **Task**: Individual workflow task
3. **Message**: Agent communication
4. **Decision**: Agent decision record
5. **Blocker**: Workflow blocker
6. **Outcome**: Final workflow result

### Data Validation

```python
# Example data validation
def validate_workflow_state(state: WorkflowState) -> bool:
    required_fields = ['request', 'workflow_id', 'status', 'tasks']
    return all(field in state for field in required_fields)

def validate_task(task: dict) -> bool:
    required_fields = ['id', 'description', 'owner', 'status']
    return all(field in task for field in required_fields)
```

### Data Persistence

```python
# Example persistence layer
class WorkflowPersistence:
    def save_state(self, state: WorkflowState) -> bool:
        # Save to Redis/Database
        pass
    
    def load_state(self, workflow_id: str) -> WorkflowState:
        # Load from Redis/Database
        pass
    
    def update_state(self, workflow_id: str, updates: dict) -> bool:
        # Update specific fields
        pass
```

## ðŸ”„ Data Flow Summary

1. **Input**: Client request â†’ Request parser â†’ Context loader
2. **Planning**: Orchestrator agent â†’ LLM call â†’ Workflow plan
3. **Execution**: Routing system â†’ Agent selection â†’ Tool execution
4. **State Management**: State updater â†’ Persistence layer â†’ Audit logger
5. **Completion**: Final result â†’ Outcome generation â†’ Workflow termination

This comprehensive data flow ensures that all information is properly tracked, validated, and persisted throughout the workflow execution.

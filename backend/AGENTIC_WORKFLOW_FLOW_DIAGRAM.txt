┌─────────────────────────────────────────────────────────────────────────────────┐
│                        NEXHELM AGENTIC WORKFLOW SYSTEM                          │
│                              FLOW DIAGRAM                                      │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              SYSTEM ARCHITECTURE                                │
└─────────────────────────────────────────────────────────────────────────────────┘

                    ┌─────────────────────────────────────┐
                    │         CLIENT REQUEST              │
                    │    "Open Roth IRA for John Smith"   │
                    └─────────────┬───────────────────────┘
                                  │
                                  ▼
                    ┌─────────────────────────────────────┐
                    │        ORCHESTRATOR AGENT           │
                    │                                     │
                    │  • Analyzes request                 │
                    │  • Creates workflow plan            │
                    │  • Generates tasks with deps        │
                    │  • LLM: GPT-3.5-turbo              │
                    └─────────────┬───────────────────────┘
                                  │
                                  ▼
                    ┌─────────────────────────────────────┐
                    │         ROUTING SYSTEM              │
                    │                                     │
                    │  • Checks task dependencies         │
                    │  • Assigns next agent               │
                    │  • Manages workflow state           │
                    └─────────────┬───────────────────────┘
                                  │
                                  ▼
                    ┌─────────────────────────────────────┐
                    │         AGENT SELECTION             │
                    │                                     │
                    │  ┌─────────────┐  ┌─────────────┐   │
                    │  │   ADVISOR   │  │ OPERATIONS  │   │
                    │  │   AGENT     │  │   AGENT     │   │
                    │  │             │  │             │   │
                    │  │ • Client    │  │ • Verify    │   │
                    │  │   comms     │  │   elig.     │   │
                    │  │ • Send      │  │ • Validate  │   │
                    │  │   forms     │  │   docs      │   │
                    │  │ • Notify    │  │ • Create    │   │
                    │  │   client    │  │   account   │   │
                    │  └─────────────┘  └─────────────┘   │
                    └─────────────────────────────────────┘
                                  │
                                  ▼
                    ┌─────────────────────────────────────┐
                    │           TOOL SYSTEM               │
                    │                                     │
                    │  • CRM Integration                  │
                    │  • Document Management              │
                    │  • Account System                   │
                    │  • Notification System              │
                    └─────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              WORKFLOW EXECUTION FLOW                            │
└─────────────────────────────────────────────────────────────────────────────────┘

    ┌─────────────┐
    │   START     │
    │             │
    │ Client      │
    │ Request     │
    └─────┬───────┘
          │
          ▼
    ┌─────────────┐
    │ORCHESTRATOR │
    │   AGENT     │
    │             │
    │ • LLM Call  │
    │ • Create    │
    │   Plan      │
    │ • Generate  │
    │   Tasks     │
    └─────┬───────┘
          │
          ▼
    ┌─────────────┐
    │   ROUTING   │
    │   SYSTEM    │
    │             │
    │ • Check     │
    │   Dependencies│
    │ • Assign    │
    │   Agent     │
    └─────┬───────┘
          │
          ▼
    ┌─────────────┐
    │  WHICH      │
    │  AGENT?     │
    └─────┬───────┘
          │
    ┌─────┴─────┐
    │           │
    ▼           ▼
┌─────────┐ ┌─────────┐
│ ADVISOR │ │OPERATIONS│
│  AGENT  │ │  AGENT   │
│         │ │         │
│ • LLM   │ │ • LLM   │
│   Call  │ │   Call  │
│ • Use   │ │ • Use   │
│   Tools │ │   Tools │
│ • Update│ │ • Update│
│   State │ │   State │
└────┬────┘ └────┬────┘
     │           │
     └─────┬─────┘
           │
           ▼
    ┌─────────────┐
    │ WORKFLOW    │
    │ COMPLETE?   │
    └─────┬───────┘
          │
    ┌─────┴─────┐
    │           │
    ▼           ▼
┌─────────┐ ┌─────────┐
│   END   │ │ CONTINUE│
│         │ │         │
│ • Return│ │ • Next  │
│   Result│ │   Task  │
└─────────┘ └─────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              INFORMATION FLOW                                   │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   CLIENT    │    │  WORKFLOW   │    │   AGENTS    │    │   LLM API   │
│   REQUEST   │    │    STATE    │    │             │    │             │
│             │    │             │    │             │    │             │
│ • Request   │───►│ • Tasks     │◄───│ • Messages  │◄───│ • GPT-3.5   │
│   Type      │    │ • Status    │    │ • Decisions │    │ • Caching   │
│ • Client ID │    │ • Context   │    │ • Actions   │    │ • Fallback  │
│ • Context   │    │ • Messages  │    │ • Results   │    │             │
└─────────────┘    │ • Decisions │    └─────────────┘    └─────────────┘
                   │ • Blockers  │              │
                   │ • Outcome   │              │
                   └─────────────┘              │
                          │                     │
                          │                     │
┌─────────────┐           │           ┌─────────────┐
│    TOOLS    │◄──────────┼──────────►│   ROUTING   │
│             │           │           │   SYSTEM    │
│ • CRM       │           │           │             │
│ • Documents │           │           │ • Dependencies│
│ • Accounts  │           │           │ • Next Agent │
│ • Notify    │           │           │ • Completion │
└─────────────┘           │           └─────────────┘
                          │
                          ▼
                   ┌─────────────┐
                   │   FINAL     │
                   │   RESULT    │
                   │             │
                   │ • Account   │
                   │   Created   │
                   │ • Client    │
                   │   Notified  │
                   │ • Workflow  │
                   │   Complete  │
                   └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              AGENT INTERACTION SEQUENCE                         │
└─────────────────────────────────────────────────────────────────────────────────┘

ORCHESTRATOR AGENT          ADVISOR AGENT           OPERATIONS AGENT
      │                           │                        │
      │ 1. Create Workflow Plan   │                        │
      ├──────────────────────────►│                        │
      │                           │                        │
      │ 2. Route to Advisor       │                        │
      ├──────────────────────────►│                        │
      │                           │                        │
      │                           │ 3. Send Forms          │
      │                           ├───────────────────────►│
      │                           │                        │
      │                           │ 4. Validate Documents  │
      │                           │◄───────────────────────┤
      │                           │                        │
      │                           │ 5. Create Account      │
      │                           │◄───────────────────────┤
      │                           │                        │
      │                           │ 6. Notify Client       │
      │                           ├───────────────────────►│
      │                           │                        │
      │ 7. Workflow Complete      │                        │
      │◄──────────────────────────┤                        │
      │                           │                        │

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              TASK DEPENDENCY FLOW                               │
└─────────────────────────────────────────────────────────────────────────────────┘

    Task 1: Verify Eligibility
           │
           ▼
    Task 2: Send Application Form
           │
           ▼
    Task 3: Validate Documents
           │
           ▼
    Task 4: Create Account ──────┐
           │                    │
           ▼                    │
    Task 5: Notify Client       │
           │                    │
           ▼                    │
    ┌─────────────┐             │
    │   WORKFLOW  │◄────────────┘
    │  COMPLETE   │
    └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              LLM CALL OPTIMIZATION                              │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   REQUEST   │    │    CACHE    │    │   LLM API   │
│             │    │             │    │             │
│ • Prompt    │───►│ • Check     │───►│ • GPT-3.5   │
│ • Context   │    │   Cache     │    │ • Response  │
│ • Params    │    │ • Hit/Miss  │    │ • Cache     │
└─────────────┘    └─────────────┘    └─────────────┘
                          │
                          ▼
                   ┌─────────────┐
                   │   RESPONSE  │
                   │             │
                   │ • Cached    │
                   │   or Fresh  │
                   │ • Return    │
                   │   to Agent  │
                   └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              ERROR HANDLING FLOW                                │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐
│   LLM CALL  │
│             │
│ • Timeout   │
│ • Quota     │
│ • Error     │
└─────┬───────┘
      │
      ▼
┌─────────────┐
│   FALLBACK  │
│   SYSTEM    │
│             │
│ • Hardcoded │
│   Logic     │
│ • Continue  │
│   Workflow  │
└─────┬───────┘
      │
      ▼
┌─────────────┐
│   WORKFLOW  │
│ CONTINUES   │
│             │
│ • Uses      │
│   Fallback  │
│ • Completes │
│   Successfully│
└─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              PERFORMANCE METRICS                                │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   SPEED     │    │    COST     │    │  ACCURACY   │    │ RELIABILITY │
│             │    │             │    │             │    │             │
│ • <5 min    │    │ • <$0.50    │    │ • >95%      │    │ • >99.9%    │
│   avg       │    │   per       │    │   success   │    │   uptime    │
│ • 2-3 LLM   │    │   workflow  │    │   rate      │    │ • Graceful  │
│   calls     │    │ • Caching   │    │ • Smart     │    │   fallback  │
│ • Early     │    │   reduces   │    │   decisions │    │ • Error     │
│   exit      │    │   costs     │    │ • Proper    │    │   handling  │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              DEPLOYMENT ARCHITECTURE                            │
└─────────────────────────────────────────────────────────────────────────────────┘

┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐
│   FRONTEND  │    │   BACKEND   │    │   STORAGE   │    │   EXTERNAL  │
│             │    │             │    │             │    │   SERVICES  │
│ • React     │    │ • FastAPI   │    │ • Redis     │    │ • OpenAI    │
│ • WebSocket │    │ • LangGraph │    │ • Database  │    │ • CRM APIs  │
│ • Real-time │    │ • Agents    │    │ • File      │    │ • Email     │
│   Updates   │    │ • Routing   │    │   Storage   │    │ • SMS       │
└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘
      │                   │                   │                   │
      └───────────────────┼───────────────────┼───────────────────┘
                          │                   │
                          ▼                   ▼
                   ┌─────────────┐    ┌─────────────┐
                   │   WORKFLOW  │    │   MONITORING│
                   │   EXECUTION │    │             │
                   │             │    │ • Metrics   │
                   │ • State     │    │ • Logging   │
                   │   Mgmt      │    │ • Alerts    │
                   │ • Agent     │    │ • Analytics │
                   │   Coordination│   │             │
                   └─────────────┘    └─────────────┘

┌─────────────────────────────────────────────────────────────────────────────────┐
│                              END OF FLOW DIAGRAM                                │
└─────────────────────────────────────────────────────────────────────────────────┘
